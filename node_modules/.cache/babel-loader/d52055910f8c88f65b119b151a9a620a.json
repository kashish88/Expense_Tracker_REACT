{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst types_1 = require(\"./types\");\n\nclass LocalStorage {\n  constructor() {\n    this.storage = window.localStorage;\n  }\n\n  initialize() {\n    return __awaiter(this, void 0, void 0, function* () {});\n  }\n\n  close() {\n    return __awaiter(this, void 0, void 0, function* () {});\n  }\n\n  get(key) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const val = this.storage.getItem(key);\n\n      if (val === null) {\n        throw types_1.ErrKeyNotFound;\n      }\n\n      return val;\n    });\n  }\n\n  set(key, val) {\n    return __awaiter(this, void 0, void 0, function* () {\n      this.storage.setItem(key, val);\n    });\n  }\n\n  getOrSet(key, genFn) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let val = this.storage.getItem(key);\n\n      if (val === null) {\n        val = genFn();\n        this.storage.setItem(key, val);\n      }\n\n      return val;\n    });\n  }\n\n}\n\nexports.LocalStorage = LocalStorage;","map":{"version":3,"sources":["../../src/storage/storage.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAEA,MAAa,YAAb,CAAyB;AAGvB,EAAA,WAAA,GAAA;AACE,SAAK,OAAL,GAAe,MAAM,CAAC,YAAtB;AACD;;AAEK,EAAA,UAAU,GAAA;wDAAmB,CAAC,C;AAAA;;AAC9B,EAAA,KAAK,GAAA;wDAAmB,CAAC,C;AAAA;;AAEzB,EAAA,GAAG,CAAC,GAAD,EAAY;;AACnB,YAAM,GAAG,GAAG,KAAK,OAAL,CAAa,OAAb,CAAqB,GAArB,CAAZ;;AACA,UAAI,GAAG,KAAK,IAAZ,EAAkB;AAChB,cAAM,OAAA,CAAA,cAAN;AACD;;AAED,aAAO,GAAP;AACD,K;AAAA;;AAEK,EAAA,GAAG,CAAC,GAAD,EAAc,GAAd,EAAyB;;AAChC,WAAK,OAAL,CAAa,OAAb,CAAqB,GAArB,EAA0B,GAA1B;AACD,K;AAAA;;AAEK,EAAA,QAAQ,CAAC,GAAD,EAAc,KAAd,EAAiC;;AAC7C,UAAI,GAAG,GAAG,KAAK,OAAL,CAAa,OAAb,CAAqB,GAArB,CAAV;;AACA,UAAI,GAAG,KAAK,IAAZ,EAAkB;AAChB,QAAA,GAAG,GAAG,KAAK,EAAX;AACA,aAAK,OAAL,CAAa,OAAb,CAAqB,GAArB,EAA0B,GAA1B;AACD;;AAED,aAAO,GAAP;AACD,K;AAAA;;AA/BsB;;AAAzB,OAAA,CAAA,YAAA,GAAA,YAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst types_1 = require(\"./types\");\nclass LocalStorage {\n    constructor() {\n        this.storage = window.localStorage;\n    }\n    initialize() {\n        return __awaiter(this, void 0, void 0, function* () { });\n    }\n    close() {\n        return __awaiter(this, void 0, void 0, function* () { });\n    }\n    get(key) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const val = this.storage.getItem(key);\n            if (val === null) {\n                throw types_1.ErrKeyNotFound;\n            }\n            return val;\n        });\n    }\n    set(key, val) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.storage.setItem(key, val);\n        });\n    }\n    getOrSet(key, genFn) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let val = this.storage.getItem(key);\n            if (val === null) {\n                val = genFn();\n                this.storage.setItem(key, val);\n            }\n            return val;\n        });\n    }\n}\nexports.LocalStorage = LocalStorage;\n//# sourceMappingURL=storage.js.map"]},"metadata":{},"sourceType":"script"}